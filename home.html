{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> {% block title %}EcoMetric - Track Your Carbon Footprint {% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="navbar">
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt="Carbo Logo">
      <span>EcoMetric AI</span>
      <a href="/" class="btn" style="color: #36d399;">Logout</a>
    </div>
    <nav class="nav-links">
      <a href="/home">Home</a>
      <a href="#about">About</a>
      <a href="#features">Features</a>
      <a href="/calculate">Personal Tracker</a>
      <a href="/simulate_ml_run">Software/ML Tracker</a>
      <a href="/dashboard">Dashboard</a>
    </nav>
    <div class="profile">
      <div class="circle">F</div>
    </div>
    <div class="menu-toggle">&#9776;</div>
  </header>

  <main class="container">
    <section class="content">
      <p class="tagline">REDUCE ¬∑ TRACK ¬∑ IMPROVE</p>
      <h1>Track Your <span>Carbon Footprint</span> in Real-Time</h1>
      <p class="desc">Take control of your environmental impact with our intuitive dashboard and personalized insights.</p>
      <div class="buttons">
        <button class="start" onclick="location.href='/calculate'">Start Tracking ‚Üí</button>
      </div>
    </section>

    <aside class="dashboard">
      <div class="card">
        <h3><img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt=""> Carbon Dashboard</h3>
        <p class="date">Today</p>
        <div class="progress">
          <div class="label">
            <span>Your Footprint</span>
            <span id="userFootprint">-- kg CO‚ÇÇ</span>
          </div>
          <div class="bar"><div class="fill" style="width: 80%;"></div></div>

          <div class="label">
            <span>Average</span>
            <span id="avgFootprint">-- kg CO‚ÇÇ</span>
          </div>
          <div class="bar"><div class="fill average" style="width: 60%;"></div></div>
        </div>

        <div class="stats">
          <div class="box">
            <h4>Transport</h4>
            <p>3.6 kg CO‚ÇÇ</p>
          </div>
          <div class="box">
            <h4>Energy</h4>
            <p>2.8 kg CO‚ÇÇ</p>
          </div>
          <div class="box">
            <h4>Food</h4>
            <p>1.5 kg CO‚ÇÇ</p>
          </div>
          <div class="box">
            <h4>Other</h4>
            <p>0.3 kg CO‚ÇÇ</p>
          </div>
        </div>
      </div>
    </aside>

  </main>

  <!-- =================== ABOUT SECTION =================== -->
<section id="about" class="fade-element section hidden">
  <h2 class="section-title">About EcoMetric AI</h2>
  <div class="about-container">
    <p>
      EcoMetric AI helps individuals and organizations track, reduce, and analyze their carbon footprint in real time. 
      Our mission is to empower everyone with data-driven insights to make eco-friendly decisions that contribute to 
      a more sustainable future.
    </p>
    <p>
      From tracking personal energy usage to analyzing software and machine learning carbon emissions, 
      EcoMetric provides tools for transparency and measurable environmental impact.
    </p>
  </div>
</section>

<!-- =================== FEATURES SECTION =================== -->
<section id="features" class="fade-element section hidden">
  <h2 class="section-title">Key Features</h2>
  <div class="features-container">
    <div class="feature-card">
      <h3>üåç Real-Time Tracking</h3>
      <p>Monitor your daily carbon footprint dynamically with real-time analytics.</p>
    </div>
    <div class="feature-card">
      <h3>üìä Interactive Dashboard</h3>
      <p>Visualize your data trends and identify improvement areas effortlessly.</p>
    </div>
    <div class="feature-card">
      <h3>ü§ñ AI-Powered Insights</h3>
      <p>Receive personalized suggestions for reducing your emissions efficiently.</p>
    </div>
    <div class="feature-card">
      <h3>‚ö° ML Model Tracker</h3>
      <p>Analyze carbon impact of your software or machine learning workloads.</p>
    </div>
    <div class="feature-card">
      <h3>üîí Secure & Private</h3>
      <p>Your environmental data stays safe with enterprise-level encryption.</p>
    </div>
  </div>
</section>


    <footer class="footer">
    <p>¬© 2025 EcoMetricAI. Track ‚Ä¢ Reduce ‚Ä¢ Improve.</p>
  </footer>

  <script>
    // Toggle mobile menu
    const toggle = document.querySelector(".menu-toggle");
    const nav = document.querySelector(".nav-links");
    toggle.addEventListener("click", () => {
      nav.classList.toggle("active");
    });
    const fadeElements = document.querySelectorAll(".fade-element");

  function handleFadeIn() {
    const trigger = window.innerHeight * 0.85;
    fadeElements.forEach(el => {
      const top = el.getBoundingClientRect().top;
      if (top < trigger) el.classList.add("fade-visible");
    });
  }

  window.addEventListener("scroll", handleFadeIn);
  window.addEventListener("load", handleFadeIn);

// Dashboard summary 
document.addEventListener("DOMContentLoaded", async () => {
  try {
    const res = await fetch("/api/dashboard-data/");
    const data = await res.json();

    const userTotal = data.latest_total || 0;
    const avgTotal = data.avg_total || 0;

    document.getElementById("userFootprint").textContent = userTotal.toFixed(1) + " kg CO‚ÇÇ";
    document.getElementById("avgFootprint").textContent = avgTotal.toFixed(1) + " kg CO‚ÇÇ";

    // Scale bars proportionally (to the larger of the two)
    const max = Math.max(userTotal, avgTotal, 1);
    const userPercent = (userTotal / max) * 100;
    const avgPercent = (avgTotal / max) * 100;

    document.getElementById("userBar").style.width = userPercent + "%";
    document.getElementById("avgBar").style.width = avgPercent + "%";
  } catch (error) {
    console.error("Error fetching dashboard data:", error);
  }
});

// ---------------- Section Visibility Handler ----------------
const sections = document.querySelectorAll(".section");
const navLinks = document.querySelectorAll(".nav-links a");

function showSection(id) {
  sections.forEach((sec) => {
    if ("#" + sec.id === id) {
      sec.classList.remove("hidden");
      setTimeout(() => sec.classList.add("fade-visible"), 100);
      window.scrollTo({ top: sec.offsetTop - 70, behavior: "smooth" });
    } else {
      sec.classList.remove("fade-visible");
      setTimeout(() => sec.classList.add("hidden"), 500);
    }
  });
}

navLinks.forEach((link) => {
  link.addEventListener("click", (e) => {
    const target = e.target.getAttribute("href");
    if (target.startsWith("#")) {
      e.preventDefault();
      showSection(target);
    }
  });
});

// Initialize: show home only (hide about/features)
document.addEventListener("DOMContentLoaded", () => {
  sections.forEach(sec => sec.classList.add("hidden"));
});


    
  </script>
</body>
</html>
